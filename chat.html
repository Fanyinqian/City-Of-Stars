<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>City Of Stars</title>
    <!-- 导航条 -->
    <link rel="stylesheet" href="css/chat.css">
</head>

<body>
    <script src="./JavaScript/global.js"></script>
    <div class="chat_box">
        <div class="chat_container">
            <!-- 左边 -->
            <div class="chat_list_left">
                <div class="logo">
                    <div class="image">
                        <img src="./images/chat_logo.png" alt="">
                    </div>
                </div>
                <div class="chat_function">
                    <ul>
                        <li class="block select_choice_item">
                            <a href="javascript:void(0);">
                                <svg t="1667993211879" class="icon" viewBox="0 0 1024 1024" version="1.1"
                                    xmlns="http://www.w3.org/2000/svg" p-id="2461" width="128" height="128">
                                    <path
                                        d="M820.8896 807.9872H487.46496a39.64928 39.64928 0 0 0-22.58944 7.07072l-135.75168 94.13632a39.7056 39.7056 0 0 1-61.39392-24.19712l-10.10176-45.74208a39.7824 39.7824 0 0 0-38.80448-31.26784l0.19968-148.992a146.5344 146.5344 0 0 1 146.24256-146.62656h535.1168a39.82848 39.82848 0 0 1 39.74656 39.90528v136.00768a119.4752 119.4752 0 0 1-119.23968 119.7056z"
                                        fill="#F4CA1C" p-id="2462"></path>
                                    <path
                                        d="M815.39072 112.64H198.3744A157.83936 157.83936 0 0 0 40.96 270.55104v379.78112a157.84448 157.84448 0 0 0 157.4144 157.91104h14.79168a1.62816 1.62816 0 0 1 1.57696 1.27488l10.10688 45.71648a77.77792 77.77792 0 0 0 120.32 47.3856l135.78752-94.08512a1.62816 1.62816 0 0 1 0.9216-0.29184h333.5168A157.83936 157.83936 0 0 0 972.8 650.33216V270.55104A157.83936 157.83936 0 0 0 815.39072 112.64zM896.512 650.33216a81.35168 81.35168 0 0 1-81.13152 81.408H481.87904a77.42464 77.42464 0 0 0-44.27264 13.824L301.81888 839.68a1.61792 1.61792 0 0 1-2.50368-0.98816l-10.10688-45.71648a77.47584 77.47584 0 0 0-76.04736-61.23008h-14.78656a81.3568 81.3568 0 0 1-81.13664-81.408V270.55104a81.3568 81.3568 0 0 1 81.13664-81.408h617.01632a81.35168 81.35168 0 0 1 81.13152 81.408v379.78112zM337.98656 424.68352a49.24416 49.24416 0 1 0 49.08544 49.24416 49.152 49.152 0 0 0-49.08544-49.24416z m184.0896 0a49.24416 49.24416 0 1 0 49.09056 49.24416 49.152 49.152 0 0 0-49.09056-49.24416z m177.07008 0a49.24416 49.24416 0 1 0 49.09056 49.24416 49.152 49.152 0 0 0-49.09056-49.24416z"
                                        fill="#595BB3" p-id="2463"></path>
                                </svg>
                            </a>
                        </li>
                        <li class="select_choice_item">
                            <a href="javascript:void(0);">
                                <svg t="1667992953978" class="icon" viewBox="0 0 1024 1024" version="1.1"
                                    xmlns="http://www.w3.org/2000/svg" p-id="2292" width="128" height="128">
                                    <path
                                        d="M439.40864 891.56608h397.48608a107.008 107.008 0 0 0 107.74528-106.2656V408.91392z"
                                        fill="#F4CA1C" p-id="2293"></path>
                                    <path
                                        d="M821.81632 92.16H284.51328A151.40352 151.40352 0 0 0 133.5296 243.63008v121.48736H85.504a34.41152 34.41152 0 0 0 0 68.82816h48.0256v128.47104H85.504a34.41664 34.41664 0 0 0 0 68.82816h48.0256v149.12512A151.40352 151.40352 0 0 0 284.51328 931.84h537.30304A151.40352 151.40352 0 0 0 972.8 780.36992V243.63008A151.40352 151.40352 0 0 0 821.81632 92.16zM904.192 780.36992a82.6112 82.6112 0 0 1-82.37568 82.64704H284.51328a82.6112 82.6112 0 0 1-82.3808-82.64704V631.2448h50.31424a34.41664 34.41664 0 0 0 0-68.82816h-50.31424V433.9456h50.31424a34.41152 34.41152 0 0 0 0-68.82816h-50.31424V243.63008a82.60608 82.60608 0 0 1 82.3808-82.64704h537.30304A82.60608 82.60608 0 0 1 904.192 243.63008v536.73984zM564.59776 506.2144a149.12512 149.12512 0 1 0-148.64384-149.12512 149.05344 149.05344 0 0 0 148.64384 149.12512z m0-229.4272a80.30208 80.30208 0 1 1-80.03584 80.30208 80.26112 80.26112 0 0 1 80.03584-80.30208z m0 259.24608a239.73376 239.73376 0 0 0-238.80704 215.60832 54.35392 54.35392 0 0 0 13.57312 41.87648 53.76 53.76 0 0 0 39.936 17.82272h370.64704a53.76 53.76 0 0 0 39.936-17.82272 54.3488 54.3488 0 0 0 13.57312-41.87648 239.72864 239.72864 0 0 0-238.85824-215.60832z m-168.09984 206.47936a171.47392 171.47392 0 0 1 336.20992 0H396.49792z"
                                        fill="#595BB3" p-id="2294"></path>
                                </svg>
                            </a>
                        </li>
                        <li class="select_choice_item">
                            <a href="javascript:void(0);">
                                <svg t="1667993244010" class="icon" viewBox="0 0 1024 1024" version="1.1"
                                    xmlns="http://www.w3.org/2000/svg" p-id="2630" width="128" height="128">
                                    <path
                                        d="M776.66304 916.34688c0-111.0016-155.17184-200.98048-346.58304-200.98048s-346.58304 89.97888-346.58304 200.98048h693.16608z"
                                        fill="#F4CA1C" p-id="2631"></path>
                                    <path
                                        d="M799.54944 526.07488a211.10272 211.10272 0 0 0-126.33088-380.928 32.71168 32.71168 0 1 0 0 65.42336 145.85344 145.85344 0 0 1 19.42528 290.47808 309.06368 309.06368 0 0 0-15.13472-0.384 33.65888 33.65888 0 1 0-4.29056 67.13344q10.69056 0 21.12-1.05472a239.6672 239.6672 0 0 1 223.0528 238.40256 32.82432 32.82432 0 0 0 65.64864 0 304.83968 304.83968 0 0 0-183.49056-279.07072z m-252.53376 11.776a236.928 236.928 0 1 0-253.54752 0A378.66496 378.66496 0 0 0 40.96 894.00832a32.82432 32.82432 0 0 0 65.64864 0 313.63072 313.63072 0 0 1 627.26144 0 32.82432 32.82432 0 0 0 65.64864 0 378.65984 378.65984 0 0 0-252.50304-356.18304zM248.96512 338.5088a171.27424 171.27424 0 1 1 171.27424 170.69056 171.17184 171.17184 0 0 1-171.27424-170.69056z"
                                        fill="#595BB3" p-id="2632"></path>
                                </svg>
                            </a>
                        </li>
                    </ul>
                </div>
            </div>
            <!-- 中间 -->
            <div class="chat_cho_mid">
                <!-- 上层个人信息 -->
                <div class="person_info">
                    <div class="pic">
                        <div class="image">
                            <img alt="" id="userimg">
                        </div>
                    </div>
                    <div class="title">
                        <div class="top" id="username">
                            我的用户名
                        </div>
                        <div class="bottom" id="usertext">
                            我的用户名
                        </div>
                    </div>
                </div>
                <!-- 中层在线用户 -->
                <div class="online_now" id="online_now">
                    <div class="title">
                        <div class="left">
                            Online now
                        </div>
                        <div class="right" id="online_now_number">
                            0
                        </div>
                    </div>
                    <div class="online_user">
                        <ul id="online_user_ul">
                            <!-- <li>
                                <a href="">
                                    <div class="image">
                                        <img src="./images/user.png" alt="">
                                    </div>
                                </a>
                            </li>
                            <li>
                                <a href="">
                                    <div class="image">
                                        <img src="./images/user.png" alt="">
                                    </div>
                                </a>
                            </li>
                            <li>
                                <a href="">
                                    <div class="image">
                                        <img src="./images/user.png" alt="">
                                    </div>
                                </a>
                            </li>
                            <li>
                                <a href="">
                                    <div class="image">
                                        <img src="./images/user.png" alt="">
                                    </div>
                                </a>
                            </li>
                            <li>
                                <a href="">
                                    <div class="image">
                                        <img src="./images/user.png" alt="">
                                    </div>
                                </a>
                            </li> -->
                        </ul>
                    </div>
                </div>
                <!-- 中层消息列表 -->
                <div class="message_choice online_now" id="online_now2">
                    <div class="title">
                        <div class="left">
                            Messages
                        </div>
                    </div>
                    <!-- <div class="search">
                        <label for="search_message">
                            <svg t="1666854225083" class="icon" viewBox="0 0 1024 1024" version="1.1"
                                xmlns="http://www.w3.org/2000/svg" p-id="16700" width="200" height="200">
                                <path
                                    d="M765.335465 843.574016c-123.485464 91.29692-257.426031 121.59202-403.385849 87.510033-114.402422-26.700301-206.11096-89.924859-274.412143-185.584932-137.206071-192.582441-110.341122-456.319951 62.483645-618.305439 171.864325-161.079928 435.49207-170.135528 620.171442-21.623677 191.100616 153.6708 238.738564 446.166702 76.039605 656.832904 3.183181 3.402711 6.393803 7.107274 9.823954 10.564867q74.091278 74.255926 148.456969 148.402087c17.781907 17.727024 24.477563 38.4177 16.766582 62.565968a58.010727 58.010727 0 0 1-90.556007 27.990039 135.916334 135.916334 0 0 1-13.1169-12.046693q-71.813658-71.758775-143.490109-143.654757a82.872467 82.872467 0 0 1-8.781189-12.6504zM472.674915 104.252823c-16.464729 1.399502-32.929457 2.305062-49.119773 4.280829-202.296631 24.422681-347.982038 220.517598-313.872609 422.265405 47.034241 278.253912 372.871219 403.989556 591.687462 227.268136 19.922322-16.080552 38.4177-36.38705 55.513576-55.650783 49.94301-56.144724 75.518222-124.665436 81.555289-199.552509 17.315406-215.13912-149.993677-396.799958-365.763945-398.611078z"
                                    p-id="16701" fill="#8a8a8a">
                                </path>
                            </svg>
                        </label>
                        <input type="text" id="search_message">
                    </div> -->
                    <div class="messages">
                        <ul id="ChatItemList">
                            <!-- <li class="chat_list">
                                <div class="left">
                                    <div class="image">
                                        <img src="./images/user.png" alt="">
                                    </div>
                                </div>
                                <div class="right">
                                    <div class="name">
                                        我的名字
                                    </div>
                                    <div class="mes_history">
                                        我的名字：历史记录
                                    </div>
                                </div>
                                <div class="no_read">
                                    2
                                </div>
                            </li> -->
                        </ul>
                    </div>
                </div>
                <!-- 中层在线用户 -->
                <div class="message_choice online_now" style="display: none;" id="online_now3">
                    <div class="title">
                        <div class="left">
                            心理咨询师
                        </div>
                    </div>
                    <!-- <div class="search">
                        <label for="search_message">
                            <svg t="1666854225083" class="icon" viewBox="0 0 1024 1024" version="1.1"
                                xmlns="http://www.w3.org/2000/svg" p-id="16700" width="200" height="200">
                                <path
                                    d="M765.335465 843.574016c-123.485464 91.29692-257.426031 121.59202-403.385849 87.510033-114.402422-26.700301-206.11096-89.924859-274.412143-185.584932-137.206071-192.582441-110.341122-456.319951 62.483645-618.305439 171.864325-161.079928 435.49207-170.135528 620.171442-21.623677 191.100616 153.6708 238.738564 446.166702 76.039605 656.832904 3.183181 3.402711 6.393803 7.107274 9.823954 10.564867q74.091278 74.255926 148.456969 148.402087c17.781907 17.727024 24.477563 38.4177 16.766582 62.565968a58.010727 58.010727 0 0 1-90.556007 27.990039 135.916334 135.916334 0 0 1-13.1169-12.046693q-71.813658-71.758775-143.490109-143.654757a82.872467 82.872467 0 0 1-8.781189-12.6504zM472.674915 104.252823c-16.464729 1.399502-32.929457 2.305062-49.119773 4.280829-202.296631 24.422681-347.982038 220.517598-313.872609 422.265405 47.034241 278.253912 372.871219 403.989556 591.687462 227.268136 19.922322-16.080552 38.4177-36.38705 55.513576-55.650783 49.94301-56.144724 75.518222-124.665436 81.555289-199.552509 17.315406-215.13912-149.993677-396.799958-365.763945-398.611078z"
                                    p-id="16701" fill="#8a8a8a">
                                </path>
                            </svg>
                        </label>
                        <input type="text" id="search_message">
                    </div> -->
                    <div class="messages">
                        <ul id="ChatItemList">
                            <li class="chat_list chat_tea_li">
                                <div class="left">
                                    <div class="image">
                                        <img src="./images/ip/chat_psy1.png" alt="">
                                    </div>
                                </div>
                                <div class="right">
                                    <div class="name">
                                        杨晓英
                                    </div>
                                    <div class="mes_history">

                                    </div>
                                </div>
                            </li>
                        </ul>
                    </div>
                </div>
            </div>
            <!-- 右边 -->
            <div class="chat_message_box">
                <!-- 第一个发送信息 -->
                <div class="change_message_one chat_select_item">
                    <div class="first">
                        <div class="left" id="chatUsername">
                            <!-- 他的名字 -->
                        </div>
                        <div class="right">
                            <svg t="1666856821084" class="icon" viewBox="0 0 1024 1024" version="1.1"
                                xmlns="http://www.w3.org/2000/svg" p-id="2805" width="200" height="200">
                                <path
                                    d="M577.26464 209.52576a127.67232 127.67232 0 1 0-127.6672 127.60576 127.63648 127.63648 0 0 0 127.6672-127.60576z m163.13856 303.65696a127.67232 127.67232 0 1 0-127.67232 127.60576 127.6416 127.6416 0 0 0 127.67232-127.60576z m145.99168 301.29152A127.67232 127.67232 0 1 0 758.72256 942.08a127.63648 127.63648 0 0 0 127.67232-127.60576z"
                                    fill="#F4CA1C" p-id="2806"></path>
                                <path
                                    d="M927.1552 244.7872H289.8176a35.39456 35.39456 0 1 1 0-70.79424h637.3376a35.39456 35.39456 0 1 1 0 70.79424zM146.432 209.408a42.496 42.496 0 1 0-42.496 42.496 42.496 42.496 0 0 0 42.496-42.496z m780.73856 341.5808H289.8176a35.39968 35.39968 0 1 1 0-70.79424h637.3376a35.39968 35.39968 0 1 1 0 70.77888zM146.432 515.584a42.496 42.496 0 1 0-42.496 42.496 42.496 42.496 0 0 0 42.496-42.496z m780.73856 332.73344H289.8176a35.39968 35.39968 0 1 1 0-70.79424h637.3376a35.39968 35.39968 0 1 1 0 70.784zM146.432 812.90752a42.496 42.496 0 1 0-42.496 42.496 42.496 42.496 0 0 0 42.496-42.496z"
                                    fill="#595BB3" p-id="2807"></path>
                            </svg>
                        </div>
                    </div>
                    <div class="second_send" id="second_send">
                        <div class="container" id="chatrecord_box">
                            <!-- <div class="message_wrapper">
                            <div class="message">
                                <div class="left">
                                    <a href="">
                                        <img src="./images/user.png" alt="">
                                    </a>
                                </div>
                                <div class="right">
                                    <div class="textmess_box">
                                        <div class="text">1234793479
                                            white-space: pre-wrap;white-space: pre-wrap;white-space:
                                            pre-wrap;white-space: pre-wrap;white-space: pre-wrap;white-space:
                                            pre-wrap;white-space: pre-wrap;white-space: pre-wrap;
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="message_wrapper2 message_wrapper">
                            <div class="message">
                                <div class="left">
                                    <a href="">
                                        <img src="./images/user.png" alt="">
                                    </a>
                                </div>
                                <div class="right">
                                    <div class="textmess_box">
                                        <div class="text">1234793479
                                            white-space: pre-wrap;white-space: pre-wrap;white-space:
                                            pre-wrap;white-space: pre-wrap;white-space: pre-wrap;white-space:
                                            pre-wrap;white-space: pre-wrap;white-space: pre-wrap;
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="message_wrapper2 message_wrapper">
                            <div class="message">
                                <div class="left">
                                    <a href="">
                                        <img src="./images/user.png" alt="">
                                    </a>
                                </div>
                                <div class="right">
                                    <div class="textmess_box">
                                        <div class="text">1234793479
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>-->
                        </div>
                    </div>
                    <div class="send_bottom">
                        <div class="container">
                            <div class="set">
                                <div class="icon">
                                    <svg t="1666858230685" class="icon" viewBox="0 0 1024 1024" version="1.1"
                                        xmlns="http://www.w3.org/2000/svg" p-id="2264" width="200" height="200">
                                        <path
                                            d="M954.06592 738.9952a215.07072 215.07072 0 1 0-215.07072 215.07072 215.07072 215.07072 0 0 0 215.07072-215.07072z"
                                            fill="#F4CA1C" p-id="2265"></path>
                                        <path
                                            d="M514.56 952.32a437.76 437.76 0 1 1 437.76-437.76 438.272 438.272 0 0 1-437.76 437.76z m0-804.91008a367.1552 367.1552 0 1 0 367.1552 367.15008 367.56992 367.56992 0 0 0-367.1552-367.15008z m0 603.75552A220.99968 220.99968 0 0 1 293.8112 530.432a35.328 35.328 0 0 1 70.6048 0 150.144 150.144 0 1 0 300.28288 0 35.328 35.328 0 0 1 70.60992 0 221.0048 221.0048 0 0 1-220.7488 220.73344zM376.64256 369.78688a42.36288 42.36288 0 1 1-42.36288-42.36288 42.36288 42.36288 0 0 1 42.36288 42.36288z m356.56192 0a42.368 42.368 0 1 1-42.36288-42.36288 42.36288 42.36288 0 0 1 42.3424 42.36288z"
                                            fill="#595BB3" p-id="2266"></path>
                                    </svg>
                                </div>
                                <div class="icon">
                                    <svg t="1666858365842" class="icon" viewBox="0 0 1024 1024" version="1.1"
                                        xmlns="http://www.w3.org/2000/svg" p-id="2433" width="200" height="200">
                                        <path
                                            d="M266.42944 804.352l123.3408-136.82688a37.93408 37.93408 0 0 1 53.39136-2.90304l81.6896 72.83712a37.92384 37.92384 0 0 0 56.43776-6.76864l99.92704-145.04448a37.91872 37.91872 0 0 1 58.15808-5.12l86.33856 87.31136 66.64704 72.65792-13.9264 60.18048-67.30752 25.46176-529.20832 11.5712z"
                                            fill="#F4CA1C" p-id="2434"></path>
                                        <path
                                            d="M814.76096 148.48H209.23904A153.26208 153.26208 0 0 0 56.32 301.74208v415.40096A153.26208 153.26208 0 0 0 209.23904 870.4h605.52192A153.26208 153.26208 0 0 0 967.68 717.13792V301.74208A153.26208 153.26208 0 0 0 814.76096 148.48z m83.456 568.65792a83.62496 83.62496 0 0 1-83.456 83.62496H209.23904a83.62496 83.62496 0 0 1-83.456-83.62496V301.74208a83.62496 83.62496 0 0 1 83.456-83.63008h605.52192a83.62496 83.62496 0 0 1 83.456 83.61984v415.40096z m-137.728-298.55744a72.42752 72.42752 0 0 0-111.4112 9.87648l-99.712 145.46432a2.8672 2.8672 0 0 1-2.14528 1.29536 2.81088 2.81088 0 0 1-2.38592-0.75264L463.28832 501.41696a72.52992 72.52992 0 0 0-102.272 5.59104l-123.0848 137.216a34.77504 34.77504 0 1 0 51.67104 46.55616l123.0848-137.216a3.03104 3.03104 0 0 1 4.28544-0.2304l81.51552 73.04192a72.41728 72.41728 0 0 0 108.1088-13.02528l99.71712-145.4592a3.03104 3.03104 0 0 1 4.66432-0.41472l86.15936 87.552a34.78016 34.78016 0 1 0 49.47456-48.896z m-316.2368-33.32608a47.00672 47.00672 0 1 0-46.90432-47.00672 46.95552 46.95552 0 0 0 46.90432 47.00672z"
                                            fill="#595BB3" p-id="2435"></path>
                                    </svg>
                                </div>
                                <div class="icon">
                                    <svg t="1666858497283" class="icon" viewBox="0 0 1024 1024" version="1.1"
                                        xmlns="http://www.w3.org/2000/svg" p-id="7426" width="200" height="200">
                                        <path
                                            d="M820.8896 807.9872H487.46496a39.64928 39.64928 0 0 0-22.58944 7.07072l-135.75168 94.13632a39.7056 39.7056 0 0 1-61.39392-24.19712l-10.10176-45.74208a39.7824 39.7824 0 0 0-38.80448-31.26784l0.19968-148.992a146.5344 146.5344 0 0 1 146.24256-146.62656h535.1168a39.82848 39.82848 0 0 1 39.74656 39.90528v136.00768a119.4752 119.4752 0 0 1-119.23968 119.7056z"
                                            fill="#F4CA1C" p-id="7427"></path>
                                        <path
                                            d="M815.39072 112.64H198.3744A157.83936 157.83936 0 0 0 40.96 270.55104v379.78112a157.84448 157.84448 0 0 0 157.4144 157.91104h14.79168a1.62816 1.62816 0 0 1 1.57696 1.27488l10.10688 45.71648a77.77792 77.77792 0 0 0 120.32 47.3856l135.78752-94.08512a1.62816 1.62816 0 0 1 0.9216-0.29184h333.5168A157.83936 157.83936 0 0 0 972.8 650.33216V270.55104A157.83936 157.83936 0 0 0 815.39072 112.64zM896.512 650.33216a81.35168 81.35168 0 0 1-81.13152 81.408H481.87904a77.42464 77.42464 0 0 0-44.27264 13.824L301.81888 839.68a1.61792 1.61792 0 0 1-2.50368-0.98816l-10.10688-45.71648a77.47584 77.47584 0 0 0-76.04736-61.23008h-14.78656a81.3568 81.3568 0 0 1-81.13664-81.408V270.55104a81.3568 81.3568 0 0 1 81.13664-81.408h617.01632a81.35168 81.35168 0 0 1 81.13152 81.408v379.78112zM337.98656 424.68352a49.24416 49.24416 0 1 0 49.08544 49.24416 49.152 49.152 0 0 0-49.08544-49.24416z m184.0896 0a49.24416 49.24416 0 1 0 49.09056 49.24416 49.152 49.152 0 0 0-49.09056-49.24416z m177.07008 0a49.24416 49.24416 0 1 0 49.09056 49.24416 49.152 49.152 0 0 0-49.09056-49.24416z"
                                            fill="#595BB3" p-id="7428"></path>
                                    </svg>
                                </div>
                            </div>
                            <div class="last_textarea">
                                <textarea name="" id="last_textarea" cols="30" rows="10"></textarea>
                                <label for="last_textarea"></label>
                                <div class="send" id="last_textarea_send">
                                    发送
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <!-- 第二个发送心结邀请 -->
                <div class="send_invite_two chat_select_item" style="display: none;">
                    <div class="first">
                        <div class="left">
                            聊天申请
                        </div>
                    </div>
                    <div class="second_invite_send second_send">
                        <ul id="invite_list">
                            <!-- <li>
                                <div class="left">
                                    <div class="image">
                                        <img src="./images/user.png" alt="">
                                    </div>
                                </div>
                                <div class="mid">
                                    <div class="top">
                                        用户名
                                    </div>
                                    <div class="bot">
                                        来自哪里
                                    </div>
                                </div>
                                <div class="rig">
                                    <button>
                                        确认
                                    </button>
                                </div>
                            </li> -->
                            <!-- <li>
                                <div class="left">
                                    <div class="image">
                                        <img src="./images/user.png" alt="">
                                    </div>
                                </div>
                                <div class="mid">
                                    <div class="top">
                                        用户名用户名用户名用户名用户用户名用用户名用户名用户名用户名用户用户名用户名用户名用户名用户名用户用户名用用户名用户名用户名用户名用户用户名
                                    </div>
                                    <div class="bot">
                                        用户名用户名用户名用户名用户用户名用用户名用户名用户名用户名用户用户名用户名用户名用户名用户名用户用户名用用户名用户名用户名用户名用户用户名用户名用户名用户名用户名用户用户名用用户名用户名用户名用户名用户用户名
                                    </div>
                                </div>
                                <div class="rig">
                                    <button>
                                        确认
                                    </button>
                                </div>
                            </li>
                            <li>
                                <div class="left">
                                    <div class="image">
                                        <img src="./images/user.png" alt="">
                                    </div>
                                </div>
                                <div class="mid">
                                    <div class="top">
                                        用户名
                                    </div>
                                    <div class="bot">
                                        来自哪里
                                    </div>
                                </div>
                                <div class="rig">
                                    <button>
                                        确认
                                    </button>
                                </div>
                            </li> -->
                        </ul>
                    </div>
                </div>
                <!-- 第三个心理咨询师 -->
                <div class="chat_select_item" style="display: none;">
                    <div class="first">
                        <div class="left">
                            杨晓英
                        </div>
                    </div>
                    <div class="second_send">

                    </div>
                    <div class="send_bottom">
                        <div class="container">
                            <div class="set">
                                <div class="icon">
                                    <svg t="1666858230685" class="icon" viewBox="0 0 1024 1024" version="1.1"
                                        xmlns="http://www.w3.org/2000/svg" p-id="2264" width="200" height="200">
                                        <path
                                            d="M954.06592 738.9952a215.07072 215.07072 0 1 0-215.07072 215.07072 215.07072 215.07072 0 0 0 215.07072-215.07072z"
                                            fill="#F4CA1C" p-id="2265"></path>
                                        <path
                                            d="M514.56 952.32a437.76 437.76 0 1 1 437.76-437.76 438.272 438.272 0 0 1-437.76 437.76z m0-804.91008a367.1552 367.1552 0 1 0 367.1552 367.15008 367.56992 367.56992 0 0 0-367.1552-367.15008z m0 603.75552A220.99968 220.99968 0 0 1 293.8112 530.432a35.328 35.328 0 0 1 70.6048 0 150.144 150.144 0 1 0 300.28288 0 35.328 35.328 0 0 1 70.60992 0 221.0048 221.0048 0 0 1-220.7488 220.73344zM376.64256 369.78688a42.36288 42.36288 0 1 1-42.36288-42.36288 42.36288 42.36288 0 0 1 42.36288 42.36288z m356.56192 0a42.368 42.368 0 1 1-42.36288-42.36288 42.36288 42.36288 0 0 1 42.3424 42.36288z"
                                            fill="#595BB3" p-id="2266"></path>
                                    </svg>
                                </div>
                                <div class="icon">
                                    <svg t="1666858365842" class="icon" viewBox="0 0 1024 1024" version="1.1"
                                        xmlns="http://www.w3.org/2000/svg" p-id="2433" width="200" height="200">
                                        <path
                                            d="M266.42944 804.352l123.3408-136.82688a37.93408 37.93408 0 0 1 53.39136-2.90304l81.6896 72.83712a37.92384 37.92384 0 0 0 56.43776-6.76864l99.92704-145.04448a37.91872 37.91872 0 0 1 58.15808-5.12l86.33856 87.31136 66.64704 72.65792-13.9264 60.18048-67.30752 25.46176-529.20832 11.5712z"
                                            fill="#F4CA1C" p-id="2434"></path>
                                        <path
                                            d="M814.76096 148.48H209.23904A153.26208 153.26208 0 0 0 56.32 301.74208v415.40096A153.26208 153.26208 0 0 0 209.23904 870.4h605.52192A153.26208 153.26208 0 0 0 967.68 717.13792V301.74208A153.26208 153.26208 0 0 0 814.76096 148.48z m83.456 568.65792a83.62496 83.62496 0 0 1-83.456 83.62496H209.23904a83.62496 83.62496 0 0 1-83.456-83.62496V301.74208a83.62496 83.62496 0 0 1 83.456-83.63008h605.52192a83.62496 83.62496 0 0 1 83.456 83.61984v415.40096z m-137.728-298.55744a72.42752 72.42752 0 0 0-111.4112 9.87648l-99.712 145.46432a2.8672 2.8672 0 0 1-2.14528 1.29536 2.81088 2.81088 0 0 1-2.38592-0.75264L463.28832 501.41696a72.52992 72.52992 0 0 0-102.272 5.59104l-123.0848 137.216a34.77504 34.77504 0 1 0 51.67104 46.55616l123.0848-137.216a3.03104 3.03104 0 0 1 4.28544-0.2304l81.51552 73.04192a72.41728 72.41728 0 0 0 108.1088-13.02528l99.71712-145.4592a3.03104 3.03104 0 0 1 4.66432-0.41472l86.15936 87.552a34.78016 34.78016 0 1 0 49.47456-48.896z m-316.2368-33.32608a47.00672 47.00672 0 1 0-46.90432-47.00672 46.95552 46.95552 0 0 0 46.90432 47.00672z"
                                            fill="#595BB3" p-id="2435"></path>
                                    </svg>
                                </div>
                                <div class="icon">
                                    <svg t="1666858497283" class="icon" viewBox="0 0 1024 1024" version="1.1"
                                        xmlns="http://www.w3.org/2000/svg" p-id="7426" width="200" height="200">
                                        <path
                                            d="M820.8896 807.9872H487.46496a39.64928 39.64928 0 0 0-22.58944 7.07072l-135.75168 94.13632a39.7056 39.7056 0 0 1-61.39392-24.19712l-10.10176-45.74208a39.7824 39.7824 0 0 0-38.80448-31.26784l0.19968-148.992a146.5344 146.5344 0 0 1 146.24256-146.62656h535.1168a39.82848 39.82848 0 0 1 39.74656 39.90528v136.00768a119.4752 119.4752 0 0 1-119.23968 119.7056z"
                                            fill="#F4CA1C" p-id="7427"></path>
                                        <path
                                            d="M815.39072 112.64H198.3744A157.83936 157.83936 0 0 0 40.96 270.55104v379.78112a157.84448 157.84448 0 0 0 157.4144 157.91104h14.79168a1.62816 1.62816 0 0 1 1.57696 1.27488l10.10688 45.71648a77.77792 77.77792 0 0 0 120.32 47.3856l135.78752-94.08512a1.62816 1.62816 0 0 1 0.9216-0.29184h333.5168A157.83936 157.83936 0 0 0 972.8 650.33216V270.55104A157.83936 157.83936 0 0 0 815.39072 112.64zM896.512 650.33216a81.35168 81.35168 0 0 1-81.13152 81.408H481.87904a77.42464 77.42464 0 0 0-44.27264 13.824L301.81888 839.68a1.61792 1.61792 0 0 1-2.50368-0.98816l-10.10688-45.71648a77.47584 77.47584 0 0 0-76.04736-61.23008h-14.78656a81.3568 81.3568 0 0 1-81.13664-81.408V270.55104a81.3568 81.3568 0 0 1 81.13664-81.408h617.01632a81.35168 81.35168 0 0 1 81.13152 81.408v379.78112zM337.98656 424.68352a49.24416 49.24416 0 1 0 49.08544 49.24416 49.152 49.152 0 0 0-49.08544-49.24416z m184.0896 0a49.24416 49.24416 0 1 0 49.09056 49.24416 49.152 49.152 0 0 0-49.09056-49.24416z m177.07008 0a49.24416 49.24416 0 1 0 49.09056 49.24416 49.152 49.152 0 0 0-49.09056-49.24416z"
                                            fill="#595BB3" p-id="7428"></path>
                                    </svg>
                                </div>
                            </div>
                            <div class="last_textarea">
                                <textarea name="" id="last_textarea" cols="30" rows="10"></textarea>
                                <label for="last_textarea"></label>
                                <div class="send" id="last_textarea_send">
                                    发送
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="go_last_href" id="go_last_href">
        <svg t="1668656061926" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg"
            p-id="8343" width="128" height="128">
            <path
                d="M512 0a512 512 0 1 0 512 512A512 512 0 0 0 512 0z m330.666667 729.173333a38.4 38.4 0 0 1-76.8 0v-56.32a213.333333 213.333333 0 0 0-213.333334-213.333333H310.613333l107.946667 107.946667a38.4 38.4 0 0 1-54.613333 54.613333l-170.666667-170.666667a38.4 38.4 0 0 1 0-54.613333l176.213333-178.346667a38.4 38.4 0 0 1 54.186667 54.186667L314.88 381.866667h236.8a290.986667 290.986667 0 0 1 290.986667 290.986666z"
                fill="#5E5C5C" p-id="8344"></path>
        </svg>
    </div>
    </div>
    <!-- ajax -->
    <script src="./JavaScript/ajax.js"></script>
    <script src="./JavaScript/cookie.js"></script>
    <script>
        // 跟谁聊天
        console.log('跟谁聊天' + getCookie('togowhichper'));
        let chatToWho = getCookie('togowhichper');
        let chatWhoFLag = true;
        var ws = null; //连接对象
        var wsUrl = 'ws://106.55.197.233:666/cityofstar/websocket/' + getCookie('userId'); // 设置变量
        let head = "http://106.55.197.233:666/upload/";
        var lockReconnect = false; //避免ws重复连接
        var heart = null; //心跳检测
        let last_textarea = document.getElementById('last_textarea'); // 输入框      
        let chatrecord_box = document.getElementById("chatrecord_box"); // 聊天记录盒子
        let last_textarea_send = document.getElementById('last_textarea_send'); // 发送按钮
        let second_send = document.getElementById('second_send');
        let chat_list = document.getElementsByClassName('chat_list');
        let chatUsername = document.getElementById('chatUsername');
        // 渲染列表ul
        let ChatItemList = document.getElementById('ChatItemList');

        let chat_select_item = document.getElementsByClassName('chat_select_item');
        // 和谁聊天
        let chatWithUser = null;
        var chatlistid = {};
        // 定时器
        let intervalId = null;
        var text = '';
        let chatWithUserId = getCookie('userId')
        let online_user_ul = document.getElementById('online_user_ul');
        // 输入框
        last_textarea.addEventListener('input', () => {
            // console.log(last_textarea.value);
            text = last_textarea.value;
        })

        // 创建连接和初始化
        createWebSocket(wsUrl);
        // 渲染左上角个人信息
        getuserinfo();
        // 渲染列表
        getchatitemlist();

        // 渲染聊天记录
        function getChatRecords(userId1, userId2) {
            chatrecord_box.innerHTML = '';
            sealAjax({
                url: "http://106.55.197.233:666/cityofstar/chatRecord/getChatRecords",
                type: "post",
                headers: {
                    'Content-Type': 'application/x-www-form-urlencoded'
                },
                data: {
                    userId1: userId1,
                    userId2: userId2
                }
            }).then(res => {
                // // let 
                // console.log(res.data);
                // if (res.data == 200) {
                getchatitemlist();
                // }
                var ChatRecords = res.data;
                chatUsername.innerHTML = ChatRecords.otherUserName;
                var char_str = '';
                for (var index = 0; index < ChatRecords.chatRecords.length; index++) {
                    char_str += `
                        <div class="message_wrapper `
                    if (ChatRecords.chatRecords[index].sendUserId == userId1) {
                        char_str += `message_wrapper2`
                    }
                    char_str += `">
                            <div class="message">
                                <div class="left">
                                    <a href=""> 
                                        <img src="`
                    if (ChatRecords.chatRecords[index].sendUserId == userId1 && ChatRecords.chatRecords[index]
                        .sendUserId != 0) {
                        char_str += `${head+ChatRecords.currUserHeadPortrait}`
                    } else {
                        if (ChatRecords.chatRecords[index].sendUserId == 0) {
                            char_str += `./images/manage.png`
                        } else {
                            char_str += `${head+ChatRecords.otherUserHeadPortrait}`
                        }
                    }
                    char_str += `" alt="">
                                    </a>
                                </div>
                                <div class="right">
                                    <div class="textmess_box">
                                        <div class="text">
                                            ${ChatRecords.chatRecords[index].message}
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    `;
                }
                chatrecord_box.innerHTML = char_str;
                chatrecord_box.scrollTop = chatrecord_box.scrollHeight;

            })
        }

        // 渲染列表
        function getchatitemlist() {
            sealAjax({
                url: "http://106.55.197.233:666/cityofstar/chatItem/getChatItemList",
                type: "post",
                headers: {
                    'Content-Type': 'application/x-www-form-urlencoded'
                },
                data: {
                    currUserId: getCookie('userId'),
                }
            }).then(res => {
                console.log('列表渲染');
                console.log(res.data);
                var char = res.data;
                ChatItemList.innerHTML = '';

                char.forEach(user => {
                    ChatItemList.appendChild(createLiItem(user));
                });
            })
        }

        last_textarea_send.addEventListener('click', () => {
            chatWithUser && sendmessage(chatWithUser.chatItem.receiveUserId);
        })
        last_textarea.addEventListener('keydown', (eve) => {
            var e = eve || window.eve;
            if (e.keyCode == 13) {
                chatWithUser && sendmessage(chatWithUser.chatItem.receiveUserId);
            }
        })
        // 发送信息
        function sendmessage(i) {
            if (text != null && text != '' && text.trim() != '') {
                console.log("发信息给谁" + i);
                sendFlag = true;
                var json = {
                    "receiveUserId": i,
                    "message": text,
                    "messageType": "generalInfo"
                };
                console.log(JSON.stringify(json));
                ws.send(JSON.stringify(json));
                setTimeout(() => {
                    // 渲染列表
                    getchatitemlist()
                    // 渲染聊天记录
                    // getChatRecords(getCookie('userId'), i);
                    let sendMesStr = `
                        <div class="message_wrapper2 message_wrapper">
                            <div class="message">
                                <div class="left">
                                    <a href="">
                                        <img src="${head+getCookie('headPortrait')}" alt="">
                                    </a>
                                </div>
                                <div class="right">
                                    <div class="textmess_box">
                                        <div class="text">${text}</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    `;
                    chatrecord_box.innerHTML = chatrecord_box.innerHTML + sendMesStr;
                    chatrecord_box.scrollTop = chatrecord_box.scrollHeight;

                    // 渲染聊天记录
                    last_textarea.value = '';
                    text = null;
                }, 50)
            }
        }

        // 构造新的li
        const createLiItem = function createLiItem(user = {}) {
            const rootLi = document.createElement('li');
            rootLi.addEventListener('click', () => rooLiClick(user))
            const chatListLeft = document.createElement('div'); //头像
            chatListLeft.classList.add('left');
            const chatImgBox = document.createElement('div');
            chatImgBox.classList.add('image');
            const chatListImg = document.createElement('img');
            // console.log(user.otherUsername);
            if (user.otherUsername == '系统通知') {
                chatListImg.setAttribute('src', "./images/manage.png");
                console.log("user");
            } else {
                chatListImg.setAttribute('src', head + user.headPortrait);
            }
            chatImgBox.appendChild(chatListImg);
            chatListLeft.appendChild(chatImgBox);

            const chatListRight = document.createElement('div'); //文字
            chatListRight.classList.add('right');
            const chatListName = document.createElement('div');
            chatListName.classList.add('name');
            chatListName.innerHTML = user.otherUsername;
            const chatListLastHistory = document.createElement('div');
            chatListLastHistory.classList.add('mes_history');

            if (user.chatItem.lastChatMessage == undefined) {
                chatListLastHistory.innerHTML = '';
            } else {
                chatListLastHistory.innerHTML = user.chatItem.lastChatMessage;
            }

            chatListRight.appendChild(chatListName);
            chatListRight.appendChild(chatListLastHistory)

            const chatNoread = document.createElement('div'); //未读
            chatNoread.classList.add('no_read');
            chatNoread.innerHTML = user.chatItem.unreadMessageNum;
            if (user.chatItem.unreadMessageNum == 0) {
                chatNoread.classList.add('none');
            }
            rootLi.append(chatListLeft)
            rootLi.append(chatListRight)
            rootLi.append(chatNoread)

            if (chatToWho != null && chatWhoFLag == true) {
                if (user.chatItem.receiveUserId == chatToWho) {
                    rooLiClick(user)
                    chatWhoFLag = false;
                }
            }
            return rootLi;
        }

        // 新建连接
        function createWebSocket(url) {
            try {
                ws = new WebSocket(wsUrl);
                console.log("新建连接");
                init_websocket();
            } catch (e) {
                reconnect(wsUrl);
                console.log(e);
            }
        }

        // 点击列表切换对应的聊天窗口
        const rooLiClick = function rooLiClick(user) {
            chat_select_item[0].style.display = 'block';
            chat_select_item[1].style.display = 'none';
            chat_select_item[2].style.display = 'none';
            chatWithUser = user;
            console.log(user);
            chatWithUserId = chatWithUser.chatItem.receiveUserId;
            chatWithUserHeader = chatWithUser.headPortrait;
            // 渲染聊天记录
            getChatRecords(getCookie('userId'), chatWithUserId);

            // 发送当前切换到哪个窗口
            let jsonn = {
                "currChatUserId": chatWithUserId,
                "messageType": "clientInfo",
            };
            console.log('ws.readyState=' + ws.readyState);
            if (ws.readyState == 1) {
                console.log("已发送当前窗口" + chatWithUserId);
                ws.send(JSON.stringify(jsonn));
            }
        }

        // 渲染左上角个人信息
        function getuserinfo() {
            // 渲染左上角个人信息
            let userimg = document.getElementById('userimg');
            let username = document.getElementById('username');
            let usertext = document.getElementById('usertext');

            sealAjax({
                url: "http://106.55.197.233:666/cityofstar/user/getUserInfo",
                type: "get",
                data: {
                    userId: getCookie('userId'),
                }
            }).then(res => {
                // console.log(res.data);
                var userinfo = res.data;
                userimg.src = head + userinfo.headPortrait;
                username.innerHTML = userinfo.username;
                if(userinfo.userSign==undefined){
                    usertext.innerHTML =''
                }else{
                    usertext.innerHTML = userinfo.userSign;
                }
            })
        }
        // 连接初始化
        function init_websocket() {
            ws.onmessage = function (e) {
                // heartCheck.reset().start(); //拿到任何消息都说明当前连接正常
                var dataStr = JSON.parse(e.data);;
                console.log(dataStr);
                console.log("收到信息");
                // 判断当前信息和列表点击的是否同一个// 然后再追加
                console.log(dataStr.sendUserId);
                //  sendMesStr;
                // console.log(chatWithUserId);
                if (dataStr.messageType == 'generalInfo' || dataStr.messageType == 'systemInfo') {
                    if (dataStr.sendUserId == chatWithUserId && chatWithUserId != getCookie('userId')) {
                        console.log("相等");
                        let sendMesStr = `
                        <div class="message_wrapper">
                            <div class="message">
                                <div class="left">
                                    <a href="">`
                        if (chatWithUserId == 0) {
                            sendMesStr += `
                                        <img src="./images/manage.png" alt="">
                                        `
                        } else {
                            sendMesStr += `
                                        <img src="${head+chatWithUserHeader}" alt="">
                                        `
                        }
                        sendMesStr += `
                                    </a>
                                </div>
                                <div class="right">
                                    <div class="textmess_box">
                                        <div class="text">${dataStr.message}</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    `;

                        chatrecord_box.innerHTML = chatrecord_box.innerHTML + sendMesStr;
                        chatrecord_box.scrollTop = chatrecord_box.scrollHeight;
                    }
                } else if (dataStr.messageType == 'onlineUserInfo') {
                    let onlineUserInfoStr = '';
                    let online_now_number = document.getElementById('online_now_number');
                    // 渲染在线用户列表
                    for (let index = 0; index < dataStr.message.length; index++) {
                        // if (dataStr.message[index].userId == getCookie('userId')) {
                        //     break;
                        // }
                        onlineUserInfoStr += `
                            <li class='onlineUserli${dataStr.message[index].userId} onlineUserli' >
                                <a href="">
                                    <div class="image">
                                        <img src="${head+dataStr.message[index].headPortrait}" alt="">
                                    </div>
                                </a>
                            </li>
                    `;
                        online_now_number.innerHTML = dataStr.message.length;
                    }
                    online_user_ul.innerHTML = onlineUserInfoStr;
                } else if (dataStr.messageType == 'userOnline') {
                    let userOnlineStr = '';
                    if (dataStr.message.userId != getCookie('userId')) {
                        userOnlineStr += `
                            <li class='onlineUserli${dataStr.message.userId} onlineUserli' >
                                <a href="">
                                    <div class="image">
                                        <img src="${head+dataStr.message.headPortrait}" alt="">
                                    </div>
                                </a>
                            </li>
                    `;

                        online_user_ul.innerHTML = online_user_ul.innerHTML + userOnlineStr;
                    }
                } else if (dataStr.messageType == 'userOut') {
                    let onlineUserli = document.getElementsByClassName('onlineUserli');
                    for (let i = 0; i < onlineUserli.length; i++) {
                        if (onlineUserli[i].classList[0] == ('onlineUserli' + dataStr.message.userId)) {
                            onlineUserli[i].remove();
                            console.log("删除");
                            break;
                        }
                    }
                } else {
                    console.log("不支持消息类型");
                }


                // 渲染列表
                getchatitemlist()
            }
            ws.onopen = () => {
                // heartCheck.reset().start(); //心跳检测重置
                //保持连接：每60秒发送一个消息
                let heartstr = {
                    "messageType": "heartBeatInfo"
                };
                intervalId = setInterval(function () {
                    console.log("发送heart");
                    ws.send(JSON.stringify(heartstr));
                }, 60000);
            }
            ws.onclose = function (e) {
                console.log(e);
                clearInterval(intervalId);
                if (e.code != 1000) {
                    reconnect(wsUrl);
                }
                console.log("连接关闭");
            }
            ws.onerror = function () {
                clearInterval(intervalId);
                reconnect(wsUrl);
                console.log("发生异常");
            }
        }
        // 重新连接函数 
        function reconnect(url) {
            if (lockReconnect) {
                return;
            }
            lockReconnect = true;
            heart && clearTimeout(heart);
            heart = setTimeout(function () {
                createWebSocket(url);
                lockReconnect = false;
            }, 4000)
        }


        // 监听窗口关闭事件，当窗口关闭时，主动去关闭websocket连接，防止连接还没断开就关闭窗口，server端会抛异常。
        window.onbeforeunload = function () {
            ws.close();
            chatWithUser = null;
            chatWithUserId = getCookie('userId');
            setCookie(' togowhichper', '', -1);
        }

        console.log('当前id' + chatWithUserId);
        chat_invite_show_fun();
        // 聊天申请渲染
        function chat_invite_show_fun() {
            // 聊天申请渲染
            let invite_list = document.getElementById("invite_list");
            let invite_list_str = '';
            sealAjax({
                url: "http://106.55.197.233:666/cityofstar/invitation/getChatInvitationList",
                type: "get",
                data: {
                    userId: getCookie('userId')
                },
                headers: {
                    'Content-Type': 'application/x-www-form-urlencoded'
                }
            }).then(res => {
                if (res.code == 500) {
                    invite_list.innerHTML = '';
                    return;
                }
                let inviteId = {};
                let inviteuserId = {};
                let invite_list_show_str = res.data;
                console.log(invite_list_show_str);
                for (let i = 0; i < invite_list_show_str.length; i++) {
                    inviteId['inviteid' + i] = invite_list_show_str[i].invitation.invitationId;
                    inviteuserId['inviteuserid' + i] = invite_list_show_str[i].invitation.sendUserId;
                    invite_list_str += `
                                <li>
                                    <div class="left">
                                        <div class="image">
                                            <img src="${head+invite_list_show_str[i].userInfo.headPortrait}" alt="">
                                        </div>
                                    </div>
                                    <div class="mid">
                                        <div class="top">
                                            ${invite_list_show_str[i].userInfo.username}
                                        </div>
                                        <div class="bot">
                                            ${invite_list_show_str[i].invitation.invitationMessage}
                                        </div>
                                    </div>
                                    <div class="rig">`
                    if (invite_list_show_str[i].invitation.status == 1) {
                        invite_list_str += `
                                        <button class='invite_button gray'>
                                            已通过
                                        </button>
                                        `;
                    } else {
                        invite_list_str += `
                                        <button class='invite_button'>
                                            通过
                                        </button>
                                        `;
                    }

                    invite_list_str += `
                                    </div>
                                </li>
            `;
                }
                invite_list.innerHTML = invite_list_str;
                // background-color: #efefef;
                let invite_button = document.getElementsByClassName('invite_button');
                for (let i = 0; i < invite_button.length; i++) {
                    invite_button[i].addEventListener('click', () => {
                        console.log(i);
                        // 调用添加list接口
                        sealAjax({
                            url: 'http://106.55.197.233:666/cityofstar/chatItem/addChatItem',
                            type: 'post',
                            data: {
                                currUserId: getCookie('userId'),
                                receiveUserId: inviteuserId['inviteuserid' + i]
                            }
                        }).then(res => {
                            // 刷新列表
                            getchatitemlist();
                            // chat_invite_show_fun();
                            console.log("刷新列表");
                        })
                        // 确认聊天邀请
                        sealAjax({
                            url: 'http://106.55.197.233:666/cityofstar/invitation/updateChatInvitation',
                            type: 'post',
                            data: {
                                invitationId: inviteId['inviteid' + i]
                            }
                        }).then(res => {
                            console.log("确认聊天邀请");
                            if (res.code == 200) {
                                chat_invite_show_fun();
                            }
                        })
                        // 给对方发系统消息
                        // sealAjax({
                        //     url: 'http://39.98.231.51:34567/cityofstar/message/sendSystemMessage',
                        //     type: 'post',
                        //     data: {
                        //         invitationId: inviteId['inviteid' + i]
                        //     }
                        // }).then(res => {
                        //     console.log("确认聊天邀请");
                        // })
                    })
                }
            })
        }



        let select_choice_item = document.getElementsByClassName('select_choice_item');

        let online_now = document.getElementById('online_now');
        let online_now2 = document.getElementById('online_now2');
        let online_now3 = document.getElementById('online_now3');

        for (let index = 0; index < select_choice_item.length; index++) {
            select_choice_item[index].addEventListener('click', () => {
                for (let j = 0; j < select_choice_item.length; j++) {
                    chat_select_item[j].style.display = 'none';
                    select_choice_item[j].classList.remove('block');
                }
                chat_select_item[index].style.display = 'block';
                select_choice_item[index].classList.add('block');
                console.log(index);
                if (index == 2) {
                    online_now.style.display = 'none';
                    online_now2.style.display = 'none';
                    online_now3.style.display = 'block';
                } else {
                    online_now.style.display = 'block';
                    online_now2.style.display = 'block';
                    online_now3.style.display = 'none';
                }
            })
        }

        // 心理咨询师
        // let chat_tea_li = document.getElementsByClassName('chat_tea_li');
        // for (let i = 0; i < chat_tea_li.length; i++) {
        //     chat_tea_li[i].addEventListener('click', () => {
        //         console.log(i);
        //     })
        // }
        // 回到上一级
        document.getElementById('go_last_href').addEventListener('click', () => {
            window.history.back(-1);
        })
    </script>
</body>

</html>